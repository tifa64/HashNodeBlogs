---
title: "Distributed Key-Value Storeู system design ุฅุฒุงู ูุนูู"
datePublished: Sun Jun 25 2023 15:12:54 GMT+0000 (Coordinated Universal Time)
cuid: cljbkk86d001m09l84yha2x5u
slug: distributed-key-value-storel-system-design-izay-naaml
tags: databases, system-design, arabic, key-value

---

โซ ูู ุญููุฌู ูุนูู system design ู key-value store ุฒู DynamoDB ุงู redis ุงู memcache ู ุงูุฃูู ูุนุฑู ุงูู ูููุฒุงุชูุง ู ุงููู ุจููุฑููุง ุนู ุงูRelational Database ุงูุนุงุฏูุฉ

โซ ูู ุฏุงุฎู ุนูู ุชููุชุฑ ู ุนุงูู ุงูdisplay ูุจูู dark mode ู ุจูุจูู ููู entry ู ุงู key-value store ุจุชุงุนุฉ ุชููุชุฑ ุจูุฏูุฑ ุนูู ุงูsession ุงูุฎุงุตุฉ ุจูู ู ุจูุดูู ูู ุงูcookie ุงูู ุชูุถููุงุชู.

โซ ุงุณุชุนูุงู ุชุงูู ููู ูู ุงูe-commerce websites ูู ุงูุช ุญุงุทุท ุญุงุฌุงุช ู ุงูcart ุจุชุงุนุชู ู ุจูุฎุฒู ุงูitems ุฏู ู value ู ุงูkey-value store ุจุญูุซ ูู ูููุช ุงูtab ู ูุชุญุช ุงูููุจุณุงูุช ุชุงูู ุญุชูุงูู ุญุงุฌุชู ููุฌูุฏุฉ

โซ

![Key Value Store Diagram Image from https://www.scylladb.com/glossary/key-value-store/](https://www.scylladb.com/wp-content/uploads/Key-Value-Store-diagram-1-e1644958335886.png align="left")

## โซ ุงููุชุทูุจุงุช

โซ 1- ุญุฌู ุงูrecord ุงูู ูู ุนุจุงุฑุฉ ุนู key-value pair ูุจูู ุซุบูู ููุนุฏูุด

10kb โซ 2- ุงูstore ููุฏุฑ ูุฎุฒู big data ู ุฏู ุญูุชุญูู ูู ุงูrecords ุญุฌููุง ุตุบูุฑ

โซ 3- High availability ุจุญูุซ ุงููุง ููุฏุฑ ูinsert ู ูget ุงูุฏุงุชุง ู ุฃู ููุช โซ

4- Automatic Scaling ูู ุญูุดูู ุฃู ูุญุท ุณูุฑูุงุฑุงุช ุจุชุงุนุฉ ุงูdata store ู ุงูููุถูุน ูุจูู ุฃูุชููุงุชููู ู ููุนููุด migration ุจุฅูุฏููุง

โซ 5- Tunable Consistency

โซ ุงูconsistency ุจุชุงุนุฉ ุงูุฏุงุชุง ูุง ุจุชุจูู strong ูุง ุจุชุจูู eventual .. ุญูุดูู ุงูู ุงููุฑู ุจูู ุงูุงุชููู ู ุงุฒุงู ูุชุญูู ู ุงูconsistency ุจุชุงุนุชูุง

โซ ูู ุญูุณุชุนูู ุณูุฑูุฑ ูุงุญุฏ ูุจูู ุนููู ุงูdatabase (ุงููู ูู ูู ุญุงูุชูุง ุฏู ุงูkey-value data store) ู ูุด ุญููุฏุฑ ูููู ุงูrequirements ุนุดุงู ุญููุตู ูstorage limit ุจุชุงุนู ู ูุงุฒู ูุณุชุนูู ูุฐุง ุณูุฑูุฑ ู ุญูุนูู Distributed Key Value Data Store๐คทโโ๏ธ

โซ ุงูููููุงุช ุงูุฃุณุงุณูุฉ ููdistributed system ุฏู ููุง

1\. Data Partition

2\. Data Replication

3\. Consistency

4\. Handling Failures

## 1- Data Parition

โซ ุญููุฒุน ุงูdata ุจุชุงุนุชูุง ุนูู ูุฐุง ุณูุฑูุฑ ู ูุงุฒู ูุนูู ุญุณุงุจูุง ุงููุง ูู ุฃุถุงููุง ุฃู ุดูููุง ุณูุฑูุฑ ููุนููุด data migration ูุชูุฑ .. ูุฃู ุฏู ุนูููุฉ ููููุฉ ู ูููู ุญุงุฌุงุช ูุชูุฑ ุบูุท ุชุญุตู ู ุงูุฏุงุชุง ุจุชุงุนุฉ ุงูusers ุชุถูุน ููุฃุจุฏ + ุจุชุฃุซุฑ ุนุงูavailability. ุนุดุงู ูุญูู ุฏู ูุญุชุงุฌูู Consistent Hashing

โซ ุงูhashing ู ุงูMap ูู ุงูjava ุงู ุงูDictionary ูู ุงูC# ูู ุฒู ุชุดููุฑ ููุฏุงุชุง ุจุญูุซ ูู ุงูุฏุงุชุง ุจsize ูุฎุชูู ุนู ุจุนุถู (ูุนูู ุงูlength ุจุชุงุน ุงุณูู ูุตุทูู ุจูุชุฎูู ุนู length ุงุณู ุฃุญูุฏ) ู ุงูhashing ุจููุญุฏ ุงูlength ุจุชุงุนูุง ู ุจูุจูู ุงุณูุน hashcode

![https://inst.eecs.berkeley.edu/~cs162/fa13/phase4.html](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703353594/8471aa05-d23d-49a9-bdc0-06c9afbf1a1c.png align="center")

โซ โซุงูhashing ู ุงูDistributed system ุจูุฎุชูู ุณููุง ุนุดุงู ูู ุจูููู ุงูุฏุงุชุง ุฏู ูุชุฎุฒูุฉ ุนูู ุฃููู ุณูุฑูุฑ.

โซ ูููู ูุซูุง ุชููุฑู ุงููุง ูุฎุฒู ุงููุงุณ ุงููู ุงุณููู ุจูุจุฏุฃ ูู ุญุฑู A-H ุนูุฏ ุงูู ุณูุฑูุฑ ุจุนุฏูู ุงููุงุณ ุงููู ูู I-P ุนูุฏ ุชุงูู ุณูุฑูุฑ ู ููุฐุง.

![https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703316373/df3a9086-f092-4904-984a-49293bc50b6f.png align="center")

โซ ูุดููุฉ ุงูุทุฑููุฉ ุฏู ุงููุง ุจุชุฎูู hot spots ุนุดุงู ูู ูุนุธู ุงูusers ุนูุฏูุง ุงุณููู ูุญูุฏ ู ูุฏู ุญูุจูู ููู ุถุบุท ูุจูุฑ ุนูู ุงูุณูุฑูุฑ ุงูุชุงูู ุนุดุงู ูู ุถุงูู ุงูุญุฑูู ูู I-P ู ูุญุชุงุฌูู ูrandomize ุงูุญูุงุฑ ุฏู .. ุนุดุงู ูุฏู ุจูุฎุฒู ุนูู ุญุณุจ ุงูrange ุจุชุงุน ุงูhashing

โซ ูุนูู ุณูุฑูุฑ 1 ุจูุฎุฒู ุงุณุงูู ุงููุงุณ ุงููู ุงูhash code ุจุชุงุนูุง ูู 10-20 ู ุณูุฑูุฑ 2 ุจูุฎุฒู ูู 21-31 ู ููุฐุง .. ู ุงูุณูุฑูุฑ ูุจูููููุด ุงูvalue ุจุชุงุนุฉ ุงูุฏุงุชุง ููู ุจูููู ุงูhashcode ุจุชุงุนุชูุง ู ุฏู ุญุงุฌุฉ ูููุณุฉ ุนุดุงู ุงูููุฑูุถ ุงูุณูุฑูุฑ ูุจูู agnostic ููุฏุงุชุง ุนุดุงู ุงูprivacy ู ูุฏุฒู

โซ

![https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703338882/a14f9db0-9d96-4edb-baed-078833c820cc.png align="center")

โซ โซ ูู ุจุตููุง ููgif ุฏู ุจูุชุฎูู ุงู ุงูุณูุฑูุฑุงุช ุนูู ุดูู ring ุจุฏู table ู ูู ุญุทููุง ุณูุฑูุฑ ุฑุงุจุน .. ู ูู ุงูุฏุงุชุง ุงููู ูุฏุงู ุงูserver clockwise ุจุชุฑูุญููุง ู ุจูููููุง ูู ุงูุณูุฑูุฑ ุงููุฏูู ุงููู ูู C ู ูcalculate ุงูhashcode ุงูุฌุฏูุฏ ุจุชุงุนูู ุจุนุฏูู ูููููู ููุณูุฑูุฑ ุงูุฌุฏูุฏ D

โซ ุงูproperty ุฏู ุงุณููุง monotonicity

โซ

![https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703380940/51ae5f47-c83e-49f0-888b-f5e0fefbaf80.png align="center")

โซ โซ ุฏู ุญุงุฌุฉ ุฌูููุฉ ุฌุฏูุง ุนุดุงู ูุชุถุฑูุงุด ุงููุง ูcalculate ุงูhasing ุจุชุงุน ูู ุงูุฏุงุชุง ู ุงูdata migration ูุงู ูููู โซ ูู ุญุตู ู ุณูุฑูุฑ ููุน ู ุงูุฏุงุชุง ุงููู ูุงูุช ุนููู ุจุชุฑูุญ ููุณูุฑูุฑ ุงููุฑูุจ ูููุง anti clockwise โซ ูุฏู ุงุญูุง ุญูููุง requirement ุงู ุงูdatabase ุชุจูู auto scalable โซ

โซ

![https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703385519/5af05bc1-5161-4613-a0ae-06d11567eda1.gif align="center")

## 2- Data replication

โซ ุนุดุงู ูุจูู realible ู available ู ุณุฎููู ู ุจุณูุณู ู ุงูdata ูุญุชุงุฌุฉ ูุชุนูููุง backup (ุงููู ูู replication) ูู ุณูุฑูุฑุงุช ุชุงููุฉ .. ุจูุญูู ุฏู ุงู ููุง data ูุชุนูููุง update ุงู insert ู ุจูุนูู replication ูู ุงู ุณูุฑูุฑูู(ูููู ุฃูุชุฑ) ู ุงุชุฌุงู ุนูุงุฑุจ ุงูุณุงุนุฉ clockwise ูู ุงูring

โซ ู ูุณุชุญุณู ูู ุงูinfrastructure ูุจูู ููู ุณูุฑูุฑุงุช ูู data centers ูุฎุชููุฉ ุนุดุงู ูู ูุซูุง ุงูุณูุฑูุฑุงุช ูููุง ูู ููุงูุฉ ููุฑุฌููุง ูู ุฃูุฑููุง ู ุงูููุงูุฉ ุฏู ุญุตู ูููุง ุฅุนุตุงุฑ ุฃุซุฑ ุนุงูdata center ู ูุฏู ุงูุณูุฑูุฑุงุช ุงูุฃุณุงุณูุฉ ู ุงูreplicas ุฑุงุญูุง ๐

![https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703388894/139fe759-6f54-43b7-ba89-ea6abc812963.gif align="center")

โซ

## 3- Consistency

โซ ูุนูู ุงูConsistency ูุนูู ููุง ุฃูุชุจ ุญุงุฌุฉ ูู ุงูุฏุงุชุงุจูุฒ .. ู ุจุนุฏูู ุฃูุฑุงูุง .. ุญูุงูู ุงูvalue ุงููู ุฃูุง ูุณู ูุงุชุจูุง

โซ Consistency is reading the most up to date data. ู ุฏู ุจุชุจูู ูุทููุจุฉ ูู ูุซูุง ุจุชุนูู payment application

โซ ุงู3 ุงููุงุน ูู consistency models ููุง

***Strong concistency:***

โซ ุงู read operation ูุงุฒู ุชุฑุฌุนูู most updated write data item

***Weak consistency:*** โซ ูุด ูุงุฒู ุงูread operation ุชุดูู ุงูmost updated value

***Eventual consistency:*** โซ ุจุนุฏ ุดููุฉ ููุช ุงูread operation ุญุชุดูู ุงูmost updated value

![https://www.reddit.com/r/ProgrammerHumor/comments/f502dr/eventual_consistency_in_comicstrip_form/](https://i.redd.it/qtv2i15apdh41.jpg align="left")

โซโซ ุนุดุงู ูุญูู ุงูconsistency ู ูุงุฒู ุงูุฏุงุชุง ุงููู ูู ุงูreplicas ุชุจูู updated .. ูููู ุชุนูู ุฏู ุจ synchronus replication ูุนูู ุงูwrite operation ุญุชุณุชูู ูุญุฏ ูุง ุชwrite ู ูู ุงูreplicas ุจุนุฏูู ุชูููู ุชูุงู

โซ ุงููุดููุฉ ุงู ูู replica ูุงุญุฏุฉ ูุดูุช ุชwrite ู ูุฏู ูู ุงูoperation ูุดูุช ู ุญูุฃุซุฑ ุนุงูavailability

![https://www.educative.io/answers/what-is-quorum-in-distributed-systems](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703432268/12a14d70-ca44-4267-a73e-32c385eb06e4.png align="center")

โซ ุญู ุงูููุถูุน ุฏู ุญุงุฌุฉ ุงุณููุง Quorum .. ุงูุฅุณู ูุฎุถ ๐ ูุนูุงู ุฃูู ุนุฏุฏ ูู ุงูreplicas ุนุดุงู ุนูู ุฃุณุงุณูุง ูุญุฏุฏ ุงูRead/Write Transaction ูุฌุญ ููุง ูุฃ โซ ูู ุงูุช ูู ุฎุฑูุฌุฉ ูุน ุตุญุงุจู ู ุงูุชูุง ุชูุงุชุฉ ุนุงูุฒูู ุชุฎุดูุง ูููู .. ู ูุงุฒู ุนุงูุฃูู 2 ููููุง ูุจููุง ุนุงูุฒูู ูุฎุดูุง ููุณ ุงููููู ู ุชุจูู ุฃุบูุจูุฉ .. ุงูุชุงูุช ูุด ููู

โซ โซ ู ุงูQuorum ูู ุงูุนุฏุฏ ุงููุทููุจ ูู ุงูreplicas ุชAck operation ูุนููุฉ ุนุดุงู ุงูoperation ุชูุฌุญ โซ ู ูู ุนูุฏู 3 replicas ุงูุฃุญุณู ุชุฎูู ุงูQuorum ุจ 2 โซ ูู ุนูุฏู 5 replicas ู ุฎูููู 3

![https://www.educative.io/answers/what-is-quorum-in-distributed-systemshttps://www.educative.io/answers/what-is-quorum-in-distributed-systems](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703626186/739a18ab-abe4-4690-8e15-f6c3e5aeb909.png align="center")

![https://www.educative.io/answers/what-is-quorum-in-distributed-systemshttps://www.educative.io/answers/what-is-quorum-in-distributed-systems](https://cdn.hashnode.com/res/hashnode/image/upload/v1687703630233/1c4d2ba8-5605-4ff4-a784-4032923312c5.png align="center")

โซ โซ โซ ุขุฎุฑ Requirement ูุญููู ูู ุงูTunable Consistency ู ุงููู ุญูุณุงุนุฏูุง ูู ุฏู ูู ุงูQuorum consensus

**N**: โซ ุนุฏุฏ ุงูreplicas

**W**: โซ ุญุฌู ุงูQuorum ููwrite operations (ูุนูู ุงูุนุฏุฏ ุงููุทููุจ ูู ุงูreplicas ุงููู ุชAck ุงูwrite operation ุนุดุงู ูููู ุงู ุงูoperation ูุฌุญุช)

**R**: โซ ุญุฌู ุงูQuorum ูู read operations

โซ ุงูconfiugration ุจุชุงุน ุงู W ู ุงูR ุจูุญุฏุฏูุง ุงูconsistency level ู ุงูlatency ู ูุซูุง ูู

**W+R &gt; N** โซ ูุนูู ูุฏู ุงู ููู strong consistency โซ ุนุดุงู ูุนูู ูุฏู ุงู ููู ุนุงูุฃูู replica ูุงุญุฏุฉ ุจุช overlap ุจูู ุงูW ู ุงูR replicas ู ุญูุจูู ุนูุฏูู ุงูmost updated data

ูู ุนูุฏูุง ูุซูุง ุนุฏุฏ ุงูreplicas N = 5 W = 3 R = 3

ู W+R &gt; N โซ ุนุดุงู ูุงุฒู ุนุงูุฃูู 3 nodes ูุชูููุง ุนุงูread operation โซ ู 3 nodes ูุชูููุง ุนุงูwrite operation โซ ู ููู node ุจุชoverlap ุจูููู ู ุฏู ุงููู ุนูุฏูุง strong consistency

**R = 1 ู W = N** โซ ู ุงูุณูุณุชู ูุนููู ูู fast read โซ ุงุญูุง ูุณู ุญู replicate xD

**R = N ู W = 1** โซ ู ุงูุณูุณุชู ูุนููู ูู fast write

**W + R &lt;= N** eventual consistency

โซ ู ุจูุฏู ูููู ุฎูุตูุง ุงูrequirments ุจุชุงุนุฉ ุงูsystem design ู distributed key-value store ุฃุชููู ุชููููุง ุงุณุชูุชุนูุง :D

## ุงููุตุงุฏุฑ

System Design Interview โ An insider's guide by Alex Xu

[https://www.educative.io/answers/what-is-quorum-in-distributed-systems](https://www.educative.io/answers/what-is-quorum-in-distributed-systems)

[https://www.scylladb.com/glossary/key-value-store/](https://www.scylladb.com/glossary/key-value-store/)

โซ[https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1](https://levelup.gitconnected.com/consistent-hashing-in-action-e9637114f0d1)

[https://inst.eecs.berkeley.edu/~cs162/fa13/phase4.html](https://inst.eecs.berkeley.edu/~cs162/fa13/phase4.html)

[https://www.techtarget.com/searchdatamanagement/tip/NoSQL-database-types-explained-Key-value-store](https://www.techtarget.com/searchdatamanagement/tip/NoSQL-database-types-explained-Key-value-store)

[https://stackoverflow.com/questions/1500611/when-to-use-a-key-value-data-store-vs-a-more-traditional-relational-db](https://stackoverflow.com/questions/1500611/when-to-use-a-key-value-data-store-vs-a-more-traditional-relational-db)

[https://www.influxdata.com/key-value-database/](https://www.influxdata.com/key-value-database/)

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ

โซ โซโซโซ โซโซโซ